---
layout: customPost
title:  "Git Step-4 : Gistory"
categories: 
  - Tools
  - Git
---
## Gistory

git에서 파일을 어떻게 저장하고 있는지 볼 수 있는 툴.

- install

  ```
  $pip3 install gistory 
  
  Collecting gistory
    Downloading gistory-0.44-py3-none-any.whl (196 kB)
       |████████████████████████████████| 196 kB 635 kB/s
  Collecting six
    Downloading six-1.15.0-py2.py3-none-any.whl (10 kB)
  Installing collected packages: six, gistory
  Successfully installed gistory-0.44 six-1.15.0
  ```

- Usage

  ```
  $<git project path>/.git/gistory
  Bottle v0.13-dev server starting up (using WSGIRefServer())...
  Listening on http://0.0.0.0:8805/
  Hit Ctrl-C to quit.
  ```

  브라우저를 열고 http://localhost:8805/  접속

  ![image-20210308161320436](/assets/images/posts/image-20210308161320436.png)



- git add 명령으로 Staging Area에 저장되었을 때 

  `변경전`

  [commit] fc236f439fb664666974e41a5f03eae998e1b0f7

  tree aa11ae2bd24ac1ca92a879581451a452c4c0d4c0
  parent f64068c96d1735c1ef757f7fb8395ba7235e21ad

  100644 blob 7c4a013e52c76442ab80ee5572399a30373600a2	README.md
  100644 blob e69de29bb2d1d6434b8b29ae775ad8c2e48c5391	a.txt
  `100644 blob 9bc8aa15552abafff42f793fcc76a03e1616335c	a_develop.txt`
  100644 blob 6759a3e5a1490473c7bc011b0457f22de82398af	a_module.java
  100644 blob 3c87d729edd556087d2953c5b4903f89923300d0	b_module.java
  100644 blob 9ca2d2856add5b3641d1f545a320d02b4864d601	b_moudle.java
  100644 blob e69de29bb2d1d6434b8b29ae775ad8c2e48c5391	break-module.java
  100644 blob a3151d16f6f13ebbeabb688bf96d747288761b8d	clientMain.java
  100644 blob e69de29bb2d1d6434b8b29ae775ad8c2e48c5391	engin-module.java
  100644 blob e69de29bb2d1d6434b8b29ae775ad8c2e48c5391	engin-moudle-support.java
  100644 blob cf5a77127db53088ee8a01efcbcf957827bfc21d	final_module.java
  100644 blob b802652b867ab815273cd0a2e8f063400e6a9a96	return-module.java
  100644 blob f9e86734968b29a7adf12cdf74a863a77ae35680	serverMain.java

  ```
  $ls
  README.md      b_module.java      engin-module.java          serverMain.java
  a.txt          b_moudle.java      engin-moudle-support.java
  a_develop.txt  break-module.java  final_module.java
  a_module.java  clientMain.java    return-module.java
  
  $code a_develop.txt  수정 후 저장
  
  $git add .
  ```

  `변경 후`

  수정한 a_develop.txt의 SHA-1 hash값 2자리/나머지 이름으로 /objects 디렉토리에 저장함. 
  ./objects/51/492775649300961b30bcd4aafdbbc7de7a7f3e 

  index파일에 현재 working directory를 스냅샷함.
  이때 a_develop.txt만 변경 되었으므로 a_develop.txt의 hash값만 새로 만들어진 
  blob 51492775649300961b30bcd4aafdbbc7de7a7f3e로 변경해서 저장함.

  ./index
  100644 7c4a013e52c76442ab80ee5572399a30373600a2 0	README.md
  100644 e69de29bb2d1d6434b8b29ae775ad8c2e48c5391 0	a.txt
  `100644 51492775649300961b30bcd4aafdbbc7de7a7f3e 0	a_develop.txt`
  100644 6759a3e5a1490473c7bc011b0457f22de82398af 0	a_module.java
  100644 3c87d729edd556087d2953c5b4903f89923300d0 0	b_module.java
  100644 9ca2d2856add5b3641d1f545a320d02b4864d601 0	b_moudle.java
  100644 e69de29bb2d1d6434b8b29ae775ad8c2e48c5391 0	break-module.java
  100644 a3151d16f6f13ebbeabb688bf96d747288761b8d 0	clientMain.java
  100644 e69de29bb2d1d6434b8b29ae775ad8c2e48c5391 0	engin-module.java
  100644 e69de29bb2d1d6434b8b29ae775ad8c2e48c5391 0	engin-moudle-support.java
  100644 cf5a77127db53088ee8a01efcbcf957827bfc21d 0	final_module.java
  100644 b802652b867ab815273cd0a2e8f063400e6a9a96 0	return-module.java
  100644 f9e86734968b29a7adf12cdf74a863a77ae35680 0	serverMain.java 
  
  

- git commit 명령으로 repository에 저장되었을 때 

  ./object에  `tree 객체`와 `commit 객체`가 생성됩니다.

  

  tree 객체는 아래와 같이 index에 존재하는 파일들을 나타내는 객체입니다.

  ![image-20210308164438434](/assets/images/posts/image-20210308164438434.png)

  

  commit 객체는 tree객체와 parent(이전 커밋의 tree), author, commiter, commit message 정보를 저장합니다.

  ![image-20210308164422454](/assets/images/posts/image-20210308164422454.png)
